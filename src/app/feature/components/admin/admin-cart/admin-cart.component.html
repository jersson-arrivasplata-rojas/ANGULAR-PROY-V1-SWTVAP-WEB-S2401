<div class="row">
    <app-top-bar-default style="width: 100%;" [stores_celphone]='store?.stores_celphone' [type]="1" [stores_email]='store?.stores_email' [stores_whatsapp]='store?.stores_whatsapp' [stores_image]='store?.stores_image' [stores_name]='store?.stores_name' [stores_facebook]='store?.stores_facebook'
        [stores_instagram]='store?.stores_instagram' [stores_uri]='store?.stores_uri' [type]="1" [dropDownType]="getType()" [stores_id]='store?.stores_id' [hide_cart]='true'></app-top-bar-default>
</div>
<div class="container">
    <div class="col-lg-12 pr-0 pl-0 col-md-12 col-sm-12 col-12 ">
        <app-header-default [theme_color_primary]='store?.store_customizer_bootstrap[0].theme_color_primary' [stores_user_like]='store?.stores_user_like' [stores_user_follow]='store?.stores_user_follow' [stores_uri]='store?.stores_uri' [stores_image_url]='getImagePrincipal()'
            [stores_name]='store?.stores_name' [store_address_google_maps]='store_address_google_maps' [stores_address]='store?.stores_address' [hours]='store?.hours' [stores_description]='store?.stores_description' [stores_nickname]='store?.stores_nickname'
            [stores_celphone]='store?.stores_celphone' [stores_email]='store?.stores_email' [stores_whatsapp]='store?.stores_whatsapp' [stores_facebook]='store?.stores_facebook' [stores_instagram]='store?.stores_instagram' [stores_collect]='store?.stores_collect'
            [stores_delivery]='store?.stores_delivery' [stores_coverage]='store?.stores_coverage' [stores_despatch_time]='store?.stores_despatch_time'>
        </app-header-default>
    </div>
    <div class="row mt-3">
        <table class="table-store-products mt-4 table table-hover">
            <thead>
                <tr>
                    <th scope="col" class="color-black font-size-16 font-weight-700">Producto</th>
                    <th scope="col" class="color-black font-size-16 font-weight-700">Detalles</th>
                    <th scope="col" class="color-black font-size-16 font-weight-700">Cantidad</th>
                    <th scope="col" class="color-black font-size-16 font-weight-700">Stock</th>

                    <th scope="col" class="color-black font-size-16 font-weight-700">Precio del producto</th>
                    <th scope="col" class="color-black font-size-16 font-weight-700">Monto total</th>
                    <th scope="col" class="color-black font-size-16 font-weight-700"></th>
                </tr>
            </thead>
            <tbody id="tbody-admin-carrito">
                <tr *ngFor="let item of products; let i=index">
                    <td scope="row">
                        <img class="img-product lazyload" style=" max-width: 80px; max-height: 80px;" *ngIf="item?.product_images.length >0" src="{{getImageProduct(item?.product_images[0].image)}}">
                        <p class="text-two-lines color-blue font-size-15 font-weight-700 mb-1">{{item.products_name}}</p>
                    </td>
                    <td>
                        <p class="text-two-lines color-blue font-size-15 font-weight-700 mb-1">{{item.subcategories_description}}
                        </p>
                    </td>
                    <td style="    width: 230px;">
                        <!--(emitAlertEvent)="eventAlertEmit($event)"-->
                        <!--<app-cart-inicio (emitEvent)="getCartInicioEmit($event)" [content]='"cart"' [products_id]='item.products_id'
              [quantity]='item.products_cart_quantity' [store]='store?.stores_uri' [type]='1'></app-cart-inicio>-->

                        <p class="d-flex justify-content-end mb-0 mr-2 ml-2">
                            <input class="form-control input-cantidad-store border-input text-center mr-2" id='input-product-cart-{{item.products_cart_id}}' value="{{item.products_cart_quantity}}" type="number" placeholder="Cantidad">
                            <button type="button" (click)="addCart($event,'cart',item.products_cart_id, item.products_id,item.products_images_tag_visible,item.product_images,getSplitTags(item.products_tags),item.products_tag_name,1)" class="btn btn-first btn-sm border-input d-flex justify-content-center align-items-center cart-negocio">
                    <i id='spinner-product-cart-{{item.products_cart_id}}-i' class="fa fa-spinner fa-spin d-none"></i> <i
                        id='spinner-cart-cart-{{item.products_cart_id}}-i' class="mdi mdi-cart-outline "></i>
                </button>
                        </p>
                        <div role="alert" class="alert d-none mt-3 text-center mb-0 alert-success alert-success-check" id='alert-product-cart-{{item.products_cart_id}}'>
                            <i class="fas fa-check"></i> Â¡Agregado al carrito!
                        </div>

                        <div *ngIf="item.products_images_tag_visible==1&&item.product_images.length >= 2" class="mb-0 mt-2 ml-2 text-left card-body-content-ecommerce-image pb-0">
                            <div class="btn-group">
                                <div *ngFor="let im of item.product_images;  let k= index" class="  p-0 pr-1" [ngClass]="{'rounded btn btn-first':im.type==0,'':im.type==1}">
                                    <label for="tag{{item.products_cart_id}}{{k}}t" class="mb-0 pl-1 pr-1" *ngIf="im.type==0">
                    <input type="radio" id="tag{{item.products_cart_id}}{{k}}t" [name]="'tag'+item.products_cart_id+'b'" [value]="im.description" [checked]="(k==0)?true:false" ><!--[ngClass]="'btn-first':"-->
                    <span class="ml-2"> {{im.description}}</span>

                  </label>
                                    <label for="tag{{item.products_cart_id}}{{k}}t" class="mb-0 pl-1 pr-1  mr-1  d-flex justify-content-center align-items-center text-center position-relative" *ngIf="im.type==1">
                    <input type="radio" id="tag{{item.products_cart_id}}{{k}}t" [name]="'tag'+item.products_cart_id+'b'" style="z-index: 9;" [value]="im.description" [checked]="validationCheckedColor(im.description,item.products_cart_tags_image_description)" ><!--[ngClass]="'btn-first':"-->
                    <span class=" rounded-circle-color  position-absolute" [attr.style]="'background:'+im.description"></span>
                  </label>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="getSplitTags(item.products_tags).length>0" class="mb-0 mt-2 card-body-content-ecommerce-image pb-0 text-left ml-2 ">
                            <p class="mb-0" *ngIf="item.products_tag_name!=''&&item.products_tag_name!=null" style="color: var(--theme_color_background_text);">{{item.products_tag_name}}</p>
                            <div class="btn-group">
                                <label for="tag{{item.products_cart_id}}{{k}}" class="mb-0 p-1  btn-sm  btn-outline-first tag" *ngFor="let tag of getSplitTags(item.products_tags);  let k= index"><!--shadow-sm -->
                  <input type="radio" id="tag{{item.products_cart_id}}{{k}}" [name]="'tag'+item.products_cart_id+''" [value]="tag" [checked]="(tag==item.products_cart_tag_description)?true:false" >
                  <span class="ml-2">{{tag}}</span>
                </label>
                            </div>
                        </div>
                    </td>
                    <td>
                        <p class="d-flex mb-1 font-size-14 font-weight-700">
                            {{item?.product_type_sale_stock}} Unid. disponibles
                        </p>
                    </td>
                    <td>
                        <p class="d-flex mb-1 font-size-14 font-weight-700">
                            S/{{item?.product_type_sale_price}} {{item?.product_type_sale_type}}.
                        </p>
                        <p class="d-flex mb-0 font-size-10 font-weight-700" *ngIf="item?.product_type_sale_discount>0&&item?.product_type_sale_discount!=null">
                            <span class="badge badge-first">{{item?.product_type_sale_discount}} <i class="mdi mdi-percent"></i>
                dsct</span>
                        </p>
                        <hr *ngIf="item?.product_type_sale_discount>0&&item?.product_type_sale_discount!=null" />
                        <p *ngIf="item?.product_type_sale_discount>0&&item?.product_type_sale_discount!=null">Precio con descuento: {{item?.product_type_sale_price_with_discount | number : '.1-3'}}</p>
                    </td>
                    <td>
                        <p class="d-flex mb-0 font-size-10 font-weight-700">
                            <span class="color-coral discunt">{{item?.products_cart_price | number : '.1-3'}}</span>
                        </p>
                    </td>
                    <td>
                        <p class="close-canasta">
                            <button (click)="remove(item.products_cart_id)" class="p-2 button-coral-border btn btn-second d-flex justify-content-center align-items-center border-0 txt-middle-500 height-40">
                <i class="mdi mdi-close"></i>
              </button>
                        </p>
                    </td>
                </tr>
                <tr *ngIf="products.length == 0">
                    <td scope="row" class="text-center" colspan="7">
                        Cargando ...
                    </td>
                </tr>
            </tbody>
        </table>
        <hr />


    </div>
    <div>
        <h4>
            <em>Precio Total:</em> {{precioTotal | number : '.1-3'}}
        </h4>
    </div>
    <p>
        <button (click)="goToFormularioPago()" class="p-2  btn btn-first mt-4 border-0 txt-middle-500 height-40  pl-3 pr-3  border-input">
      Seguir proceso de compra
    </button>
    </p>
</div>
<app-footer-store-default [textWhatsapp]="store?.stores_name" [phoneWhatsapp]="store?.stores_whatsapp" [image]="getImagePrincipal()" [store]="store?.stores_name"></app-footer-store-default>
