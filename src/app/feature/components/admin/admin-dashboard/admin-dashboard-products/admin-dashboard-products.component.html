<div id="STORE-DASHBOARD-PRODUCTOS">
    <div class="alerts">

    </div>
    <!-- ============ Body content start ============= [modules]="modulesQuill" (input)="quillContentChange($event)"-->
    <div class="main-content">

        <div class="breadcrumb d-flex" style="justify-content: space-between;">
            <h1>Mis Productos </h1>
            <button id="startProductosTourBtn" class="btn btn-large btn-danger-2 border-input"><i
                    class="mdi mdi-information-outline"></i> Ayuda</button>
        </div>
        <div class="separator-breadcrumb "></div>
        <div class="row">
            <div class="col-lg-11 col-md-12 col-sm-12 m-auto col-12">
                <div class="card o-hidden mb-4" id="cardSubcategory">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mt-2">
                                <div class="form-group">
                                    <label for="recipient-name-2" class="col-form-label">
                                        Seleccione su categoría: 
                                    </label>
                                    <select id="category" name="category" class="form-control" (change)="getSubCategoriesChange($event.target.value)">
                                        <option *ngFor="let $item of $categories let j= index" value="{{ $item.id }}">{{
                                            $item.description }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mt-2">
                                <div class="form-group">
                                    <label for="recipient-name-2" class="col-form-label">
                                        Seleccione su Subcategoría: 
                                    </label>
                                    <select id="subcategory" name="subcategory" class="form-control " (change)="getProductsBySubcategoriesChange($event.target.value)">
                                        <option *ngFor="let $item of $subcategories let j= index" value="{{ $item.id }}">
                                            {{ $item.description }}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6 col-sm-6 col-12 mt-2 text-right m-auto">
                                <div class="dropdown dropleft ">
                                    <button id="btn-addModal" (click)="addModalProduct()" class="btn btn-warning-2 btn-color-settings" type="button" data-toggle="modal" data-target="#addModal">
                                        Agregar nuevo producto 
                                    </button>
                                </div>
                                <!--
<button class="btn btn-warning-2 btn-color-settings" type="button"
                                        id="dropdownMenuButton_table4" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">
                                        Agregar y/o Ajustes <i class="nav-icon i-Gear-2"></i>
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton_table4">
                                        <a id="btn-addModal" class="dropdown-item" data-toggle="modal"
                                            data-target="#addModal" href="#">Agregar nuevo producto</a>
                                    </div>
                                   -->
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <div class="row d-flex">
                                <p class="w-50 float-left card-title m-0">Tabla de Productos </p>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <!--
                           <app-search-ui></app-search-ui>
                       -->

                        <div class="row mt-3 justify-content-space-between">
                            <div class="col-lg-6 col-md-8 col-sm-12 col-12 col-xs-12">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="basic-addon2">
                                            <i class="nav-icon dripicons-search"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" #searchInput placeholder="Busque producto ...">
                                    <div class="input-group-append">
                                        <button class=" btn btn-danger-2" (click)="cleanTableProducts(searchInput)">
                                            Limpiar
                                        </button>
                                        <!--(keyup)="keyUpTableProducts(searchInput)"-->
                                        <button class=" btn btn-first" id="basic-addon2" (click)="searchTableProducts(searchInput)">
                                            Buscar
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-4 col-sm-12 col-12 col-xs-12">
                            </div>
                        </div>

                        <div class="table-responsive" id="PRODUCTSALL">
                            <table id="sales_table" class="table table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Producto</th>
                                        <th scope="col">Categoría<br>Subcategoría</th>
                                        <th scope="col">Tipo de Venta</th>
                                        <th scope="col">Precio/Descuento</th>
                                        <th scope="col">Unidad/Venta mínima/<br>Stock</th>
                                        <!-- <th style="    width: 300px;" scope="col">Descripción</th>-->
                                        <th scope="col">Estado</th>

                                        <th scope="col">Ajustes</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <tr *ngFor="let $value of $products let j= index" data-id="{{ $value.id }}">
                                        <td>{{j+1}}</td>
                                        <td>
                                            <p>{{$value.name}}</p>
                                            <img class="card-img boder-card-ecoommerce-image-style img-card-ecoommerce-image-style n" src="{{getImage($value.product_images)}}">
                                        </td>
                                        <td scope="col">
                                            <p class="mb-0">Categoría</p>
                                            <p class="mb-1"><strong>{{$value.category_name}}</strong></p>
                                            <p class="mb-0">Sub categoría</p>
                                            <p class="mb-0"><strong>{{$value.subcategory_name}}</strong></p>
                                        </td>
                                        <td>
                                            <div *ngFor="let $item of $value.product_type_sale let i= index">
                                                <div *ngIf="$item.type == 'unit'">
                                                    <div class="product-border-unit mr-2 m-auto text-center">
                                                        <span class="font-weight-bold  p-2 m-1">Venta en Unidad</span>

                                                    </div>
                                                </div>
                                                <div *ngIf="$item.type == 'weight'">
                                                    <div class="product-border-unit mr-2 m-auto text-center">
                                                        <span class="font-weight-bold  p-2 m-1">Venta en Peso</span>

                                                    </div>
                                                </div>
                                            </div>

                                        </td>

                                        <td>
                                            <div *ngFor="let $item of $value.product_type_sale let y= index">
                                                <div *ngIf="$item.type=='unit'">
                                                    <div class="product-border-unit mr-2 text-left" style="display: grid;">
                                                        <div *ngIf="$item.discount!= null">
                                                            <p class="mb-0">Precio: <span class="font-weight-bold">S/.{{ (($item.price ))| number : '.1-3' }}</span></p>
                                                            <p class="mb-0">Descuento: <span class="font-weight-bold">{{ (($item.discount ))}}%</span></p>
                                                            <p class="mb-0">Precio + Descuento: <span class="font-weight-bold">S/.{{ ($item.price - ($item.price * $item.discount/100 )) | number : '.1-3'}}</span></p>

                                                        </div>
                                                        <div *ngIf="$item.discount==null">
                                                            <p class="mb-0">Precio: <span class="font-weight-bold">S/.{{ (($item.price ))  | number : '.1-3'}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div *ngIf="$item.type=='weight'">
                                                    <div class="product-border-unit mr-2 text-left" style="display: grid;">
                                                        <div *ngIf="$item.discount!= null">
                                                            <p class="mb-0">Precio: <span class="font-weight-bold">S/.{{ (($item.price ))| number : '.1-3' }}</span></p>
                                                            <p class="mb-0">Descuento: <span class="font-weight-bold">{{ (($item.discount ))}}%</span></p>
                                                            <p class="mb-0">Precio + Descuento: <span class="font-weight-bold">S/.{{ ($item.price - ($item.price * $item.discount/100 )) | number : '.1-3'}}</span></p>

                                                        </div>
                                                        <div *ngIf="$item.discount==null">
                                                            <p class="mb-0">Precio: <span class="font-weight-bold">S/.{{ (($item.price ))  | number : '.1-3'}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--<div class="text-left" *ngIf="$item.weight_min_unit!=null">
                                                    <p class="mb-0">Venta mínima: <span class="font-weight-bold">{{ $item.weight_min_unit  }}</span></p>
                                                </div>-->
                                            </div>
                                        </td>
                                        <td>
                                            <div *ngFor="let $item of $value.product_type_sale let y= index">
                                                <div class="text-left" *ngIf="$item.weight_min_unit!=null">
                                                    <p class="mb-0">Unidad: <span class="font-weight-bold">{{ $item.weight_min_unit  }}</span></p>
                                                </div>
                                                <div class="text-left" *ngIf="$item.weight_min!=null">
                                                    <p class="mb-0">Mínimo: <span class="font-weight-bold">{{ $item.weight_min  }}</span></p>
                                                </div>
                                                <div class="text-left" *ngIf="$item.stock!=null">
                                                    <p class="mb-0">Stock: <span class="font-weight-bold">{{ $item.stock  }}</span></p>
                                                </div>
                                            </div>
                                        </td>
                                        <!--<td>{{$value.description | slice:0:50}}...</td>-->
                                        <td>
                                            <p>
                                                <span *ngIf="$value.status==1">Visible</span>
                                                <span *ngIf="$value.status==0" class="badge badge-pill badge-warning p-2 m-1">No Visible</span>
                                            </p>

                                            <p>
                                                <span *ngIf="$value.unavailable==0">Agotado</span>
                                                <span *ngIf="$value.unavailable==1" class="badge badge-pill badge-warning p-2 m-1">No Agotado</span>
                                            </p>
                                        </td>
                                        <td>
                                            <!--modalEdit-->
                                            <button class=" btn btn-success-2 mr-2 mb-2  font-16px" href="#" type="button" data-toggle="modal" data-target="#modalEdit" (click)="editModalProduct(this,$value.id)">
                                                Editar
                                            </button>
                                            <button class=" btn btn-danger-2 mr-2 mb-2  font-16px  category_delete alert-confirm font-16px" (click)="deleteModalProduct(this,$value.id)" name="category_delete" href="#" data-toggle="tooltip" data-placement="top" title="Eliminar !!!">
                                                Eliminar
                                            </button>
                                        </td>
                                    </tr>
                                    <tr *ngIf="$products.length<=0">
                                        <td COLSPAN=9>
                                            Aún no hay productos
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 d-flex justify-content-center pb-4" id="BUSQUEDA-PAGINATION">
                                <ngb-pagination (pageChange)="paginationChange($event)" [collectionSize]="paginate.total" [(page)]="paginate.current_page" [maxSize]="paginate.per_page" [rotate]="true" [boundaryLinks]="true"></ngb-pagination>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="addModal" role="dialog" aria-labelledby="addModal" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addModal_title">Producto</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione una categoría: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <select name="category" class="form-control max-width-350px" (change)="getSubcateriesChange($event.target.value)">
                                    <option *ngFor="let $item of $categoriesArray let j= index" value="{{ $item.id }}">{{$item.description }}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione una subcategoría: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <select name="subcategory" class="form-control max-width-350px">
                                    <option *ngFor="let $item of $subcategoriesArray let j= index" value="{{ $item.id }}">{{$item.description }}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Nombre del producto: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <input type="text" class="form-control" name="name" id="products-name" maxlength="100">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione Tipo de venta del producto: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <select name="product_sale_status" class="form-control">
                                    <option value="unit" selected>Producto venta en Unidades</option>
                                    <option value="weight">Producto venta en Peso</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Cantidad mínima del producto</label>
                                <input type="number" name="product_sale_min" class="form-control" data-pos="2" data-type="unit-div">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Precio del producto</label>
                                <input type="number" name="price" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Descuento del producto</label>
                                <input type="number" name="discount" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Stock del producto</label>
                                <input type="number" name="stock" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione medida del produto: 
                                </label>
                                <select id="select-unit" name="unit" class="form-control">
                                    <option value="" selected>Ninguna</option>
                                    <option value="kg">kg</option>
                                    <option value="L">L</option>
                                    <option value="ml">ml</option>
                                    <option value="g" >g</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12 d-none">
                            <div class="form-group ">
                                <label class="">Nombre General de los Tags</label>
                                <input type="text" name="tag_name" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-12 d-none">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Agregue tags del producto: 
                                </label>
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" #tag placeholder="Tags del producto">
                                    <div class="input-group-append">
                                        <button class="btn btn-info-2" (click)="addTag(tag)" type="button">Agregar Tag</button>
                                    </div>

                                </div>

                                <button *ngFor="let item of tags; let y= index" type="button" (click)="removeTag(y)" style="font-size: 16px;" class="btn btn-sm btn-first m-1">
                                    <span class="badge badge-pill badge-first">{{item}}</span><span  class="fas fa-times"></span>
                                </button>


                            </div>
                        </div>
                        <div class="col-lg-12  d-none">
                            <div class="form-group">
                                <label for="ImageHandleCategory" style="width: 100%">
                                    <div class="dropzone position-relative dropzone-style-border cursor-pointer" id="file" action="#" >
                                        <div class="dz-message needsclick"
                                            style="font-size: 13px !important;text-align: center !important">
                                            Click para subir imagen<strong>(Opcional)</strong><BR>
                                            <span class="note needsclick">(Tamaño de la imagen
                                                <strong>400X400</strong>)</span>
                                        </div>
                                        <div class="fallback d-none">
                                            <!--image/*-->
                                            <input id="ImageHandleCategory" name="file" type="file"
                                                accept="image/png, image/jpeg, image/jpg"
                                                onchange="handleFiles(this.files,this)" />
    
                                        </div>
                                        <div id="fileList" class="fileList d-none">
                                            <p class="mb-0 mt-0">¡No se han seleccionado archivos!</p>
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="col-12">
                            <hr/>
                            <h6>Imagenes de Productos <strong>(1080px X 1080px)</strong></h6>
                        </div>
                        <div class="col-12">
                            <div class="input-group mb-3">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="inputGroupFile02" (change)="fileChangeEvent($event)">
                                    <label class="custom-file-label" for="inputGroupFile02" aria-describedby="inputGroupFileAddon02">Suba su imagen</label>
                                </div>
                                <div class="input-group-append d-none">
                                    <span class="input-group-text" id="inputGroupFileAddon02">Subir</span>
                                </div>
                            </div>

                        </div>
                        <div class="col-12">
                            <div class="row pl-3">
                                <div class="form-group mr-1">
                                    <button class="btn btn-first " (click)="resetImage()">Restaurar cambios</button>
                                </div>
                                <div class="form-group mr-1">
                                    <button class="btn btn-info " (click)="zoomOut()">Zoom -</button>
                                    <button class="btn btn-info " (click)="zoomIn()">Zoom +</button>
                                </div>
                                <div class="form-group d-none">
                                    <button class="btn btn-first " (click)="saveImageProduct()" [ladda]="isLoading">Guardar</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <app-admin-dashboard-image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="true" [containWithinAspectRatio]="containWithinAspectRatio" [aspectRatio]="1/1" [resizeToWidth]="1080" [cropperMinWidth]="1080" [cropperMinHeight]="1080"
                                [onlyScaleDown]="true" [roundCropper]="false" [canvasRotation]="canvasRotation" [transform]="transform" [alignImage]="'left'" [style.width.px]='200' [style.height.px]='200' [style.display]="showCropper ? null : 'none'" format="png"
                                (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded()" (cropperReady)="cropperReady($event)" (loadImageFailed)="loadImageFailed()">
                            </app-admin-dashboard-image-cropper>
                        </div>
                        <div class="col-lg-12 d-none">

                            <div class="form-group text-align-end  text-right  mb-0">
                                <label class="" for="products_images_tag_visible_add">Tags de Imagen Visible</label>
                                <label class="switch switch_ ml-2 mr-1">
                                    <input type="checkbox" name="products_images_tag_visible_add" id="products_images_tag_visible_add"
                                     [checked]="false" style=" transform: scale(1.2);" >
                                </label>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Imagen</th>
                                            <th scope="col">Tipo</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let $value of images let j= index">
                                            <td>{{j+1}}</td>
                                            <td scope="col">
                                                <img [style.width.px]='100' [style.height.px]='100' src="{{getImageProduct($value.image)}}" />
                                            </td>
                                            <td>
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-6 col-12">
                                                        <div class="form-group">
                                                            <label>Seleccione Tipo</label>
                                                            <select id="{{j}}-type" [value]="$value.type" class="form-control ">
                                                                <option value="0">Texto</option>
                                                                <option  value="1">Color</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Ingrese Valor</label>
                                                            <input id="{{j}}-description" [value]="$value.description" class="form-control mb-2" type="text" />
                                                        </div>
                                                        <div class="form-group text-align-end  text-right  mb-0 d-none">
                                                            <label class="" for="{{j}}-visible">Visible</label>
                                                            <label class="switch switch_ ml-2 mr-1">
                                                                <input type="checkbox" id="{{j}}-visible" [checked]="($value.visible==1)?true:false" style="    transform: scale(1.2);" checked>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8 col-md-8 col-sm-6 col-12">
                                                        <div class="color-sketch-product" [style.width.px]='200' [style.height.px]='240'>
                                                            <color-sketch [color]="'#FF0000'" (onChangeComplete)="changeColorComplete($event,j)">
                                                            </color-sketch>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <button [ladda]="isLoadingDeleteTypeProduct" (click)="deleteImageProduct(j,$value.image)" class="btn btn-danger-2 btn-sm">Eliminar</button>
                                            </td>
                                        </tr>
                                        <tr *ngIf="images.length<=0">
                                            <td COLSPAN=4>
                                                Aún no hay imagenes de producto
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <hr/>
                        </div>
                        <div class="col-lg-12 ">
                            <div class="form-group">
                                <label for="description" class="col-form-label">Descripción Pequeña: </label>
                                <textarea type="text" class="form-control" name="description"></textarea>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="description" class="col-form-label">Descripción Larga de contenido : </label>
                                <angular-editor [(ngModel)]="htmlContent" [config]="config"></angular-editor>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group cursor-pointer" style="justify-content: space-between;">
                                <h5 class="mb-0 pt-2 pb-2 pl-2" (click)="expandAdd()" style="background: var(--theme_color_light);">Ver HTML Preview (Click para Expandir)</h5>
                            </div>
                            <div class="html" *ngIf="expand==true" [innerHtml]="htmlContent" id="collapse">
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="description" class="col-form-label">
                                    Enlace para compartir: 
                                    <span class="color-coral">
                                        <strong> (*)</strong>
                                    </span>
                                </label>
                                <div class="input-group mb-3">
                                    <input class="form-control " name="url" id="producto-url" type="text" placeholder="Ingrese su url para compartir producto">

                                </div>
                            </div>
                        </div>

                        <div class="col-lg-12">

                        </div>
                        <div class="col-lg-12">
                            <div class="form-group text-align-end  text-right  mb-0">
                                <label class="" for="product_unavailable">Producto No Agotado</label>
                                <label class="switch switch_ ml-2 mr-1">
                                    <input type="checkbox" id="product_unavailable" name="unavailable"
                                        style="    transform: scale(1.2);" checked>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group text-align-end  text-right  mb-0">
                                <label class="" for="product_visible">Producto Visible</label>
                                <label class="switch switch_ ml-2 mr-1">
                                    <input type="checkbox" id="product_visible" name="status"
                                        style="    transform: scale(1.2);" checked>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-lg-12 ">
                            <button class="btn btn-first btn-block ladda-button basic-ladda-button mt-2" id="btn-addProduct" type="button" (click)="addProduct()" data-style="expand-left">
                                <span class="ladda-label">Guardar producto</span>
                                <span class="ladda-spinner"></span>
                                <span class="ladda-spinner"></span>
                            </button>
                            <!-- <button type="button" id="btn-addProduct" class="btn btn-first mt-2 pb-2 pt-2 btn-block">Guardar producto</button> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modalEdit" role="dialog" aria-labelledby="modalEdit" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalEdit_title">Producto</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input name="id" class="d-none" type="text">
                    <input name="product_type_sale_id" class="d-none" type="text">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione una categoría: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <select name="category" class="form-control max-width-350px" (change)="getSubcateriesChange($event.target.value)">
                                    <option *ngFor="let $item of $categoriesArray let j= index" value="{{ $item.id }}">{{$item.description }}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione una subcategoría: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <select name="subcategory" class="form-control max-width-350px">
                                    <option *ngFor="let $item of $subcategoriesArray let j= index" value="{{ $item.id }}">{{$item.description }}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Nombre del producto: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <input type="text" class="form-control" name="name" id="products-name" maxlength="100">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione Tipo de venta del producto: 
                                    <span class="color-coral">
                                        <strong>(*)</strong>
                                    </span>
                                </label>
                                <select name="product_sale_status" class="form-control">
                                    <option value="unit" >Producto venta en Unidades</option>
                                    <option value="weight">Producto venta en Peso</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Cantidad mínima del producto</label>
                                <input type="number" name="product_sale_min" class="form-control" data-pos="2" data-type="unit-div">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Precio del producto</label>
                                <input type="number" name="price" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Descuento del producto</label>
                                <input type="number" name="discount" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Stock del producto</label>
                                <input type="number" name="stock" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Seleccione medida del produto: 
                                </label>
                                <select id="select-unit" name="unit" class="form-control">
                                    <option value="" selected>Ninguna</option>
                                    <option value="kg">kg</option>
                                    <option value="L">L</option>
                                    <option value="ml">ml</option>
                                    <option value="g" >g</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group ">
                                <label class="">Nombre General de los Tags</label>
                                <input type="text" name="tag_name" class="form-control">
                            </div>
                        </div>


                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="recipient-name-2" class="col-form-label">
                                    Agregue tags del producto: 
                                </label>
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" #tag2 placeholder="Tags del producto">
                                    <div class="input-group-append">
                                        <button class="btn btn-info-2" (click)="addTag(tag2)" type="button">Agregar Tag</button>
                                    </div>
                                </div>
                                <button *ngFor="let item of tags; let y= index" type="button" (click)="removeTag(y)" style="font-size: 16px;" class="btn btn-sm btn-first m-1">
                                    <span class="badge badge-pill badge-first">{{item}}</span><span  class="fas fa-times"></span>
                                </button>
                            </div>
                        </div>
                        <div class="col-lg-12 d-none">
                            <div class="form-group">
                                <label for="ImageHandleCategory" style="width: 100%">
                                    <div class="dropzone position-relative dropzone-style-border cursor-pointer" id="file" action="#" >
                                        <div class="dz-message needsclick"
                                            style="font-size: 13px !important;text-align: center !important">
                                            Click para subir imagen<strong>(Opcional)</strong><BR>
                                            <span class="note needsclick">(Tamaño de la imagen
                                                <strong>400X400</strong>)</span>
                                        </div>
                                        <div class="fallback d-none">
                                            <!--image/*-->
                                            <input id="ImageHandleCategory" name="file" type="file"
                                                accept="image/png, image/jpeg, image/jpg"
                                                onchange="handleFiles(this.files,this)" />
    
                                        </div>
                                        <div id="fileList" class="fileList d-none">
                                            <p class="mb-0 mt-0">¡No se han seleccionado archivos!</p>
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="col-12">
                            <hr/>
                            <h6>Imagenes de Productos <strong>(1080px X 1080px)</strong></h6>
                        </div>
                        <div class="col-12">
                            <div class="input-group mb-3">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="inputGroupFile02" (change)="fileChangeEventProduct($event)">
                                    <label class="custom-file-label" for="inputGroupFile02" aria-describedby="inputGroupFileAddon02">Suba su imagen</label>
                                </div>
                                <div class="input-group-append">
                                    <span class="input-group-text" id="inputGroupFileAddon02">Subir</span>
                                </div>
                            </div>

                        </div>
                        <div class="col-12">
                            <div class="row pl-3">
                                <div class="form-group mr-1">
                                    <button class="btn btn-first " (click)="resetImage()">Restaurar cambios</button>
                                </div>
                                <div class="form-group mr-1">
                                    <button class="btn btn-info " (click)="zoomOut()">Zoom -</button>
                                    <button class="btn btn-info " (click)="zoomIn()">Zoom +</button>
                                </div>
                                <div class="form-group ">
                                    <button class="btn btn-first " (click)="saveImageProductEdit()" [ladda]="isLoadingProduct">Guardar</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <app-admin-dashboard-image-cropper [imageChangedEvent]="imageChangedProductEvent" [maintainAspectRatio]="true" [containWithinAspectRatio]="containWithinAspectRatio" [aspectRatio]="1/1" [resizeToWidth]="1080" [cropperMinWidth]="1080" [cropperMinHeight]="1080"
                                [onlyScaleDown]="true" [roundCropper]="false" [canvasRotation]="canvasRotation" [transform]="transform" [alignImage]="'left'" [style.width.px]='200' [style.height.px]='200' [style.display]="showCropperProduct ? null : 'none'"
                                format="png" (imageCropped)="imageCroppedProduct($event)" (imageLoaded)="imageLoadedProduct()" (cropperReady)="cropperReady($event)" (loadImageFailed)="loadImageFailed()">
                            </app-admin-dashboard-image-cropper>
                        </div>
                        <div class="col-lg-12 ">
                            <div class="form-group text-align-end  text-right  mb-0">
                                <label class="" for="products_images_tag_visible_edit">Tags de Imagen Visible</label>
                                <label class="switch switch_ ml-2 mr-1">
                                    <input type="checkbox" name="products_images_tag_visible_edit" id="products_images_tag_visible_edit" 
                                     style=" transform: scale(1.2);" >
                                </label>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-bordered text-center">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Imagen</th>
                                            <th scope="col">Tipo</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let $value of images let j= index">
                                            <td>{{j+1}}</td>
                                            <td scope="col">
                                                <img [style.width.px]='100' [style.height.px]='100' src="{{getImageProductEdit($value.id,$value.product_id,$value.image,$value.path)}}" />
                                            </td>
                                            <td>
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-6 col-12">
                                                        <div class="form-group">
                                                            <label>Seleccione Tipo</label>
                                                            <select id="{{j}}-type-edit" [value]="$value.type" class="form-control ">
                                                                <option value="0">Texto</option>
                                                                <option  value="1">Color</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Ingrese Valor</label>
                                                            <input id="{{j}}-description-edit" [value]="$value.description" class="form-control mb-2" type="text" />
                                                        </div>
                                                        <div class="form-group text-align-end  text-right  mb-0 d-none">
                                                            <label class="" for="{{j}}-visible-edit">Visible</label>
                                                            <label class="switch switch_ ml-2 mr-1">
                                                                <input type="checkbox" id="{{j}}-visible-edit" [checked]="($value.visible==1)?true:false" style="    transform: scale(1.2);" checked>
                                                            </label>
                                                        </div>
                                                        <div class="form-group">
                                                            <button class="btn btn-first btn-sm" [ladda]="isLoadingEditTypeProduct" (click)="saveProductImageType($value.id,$value.product_id,j)">Guardar Tipo</button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-8 col-md-8 col-sm-6 col-12">
                                                        <div class="color-sketch-product" [style.width.px]='200' [style.height.px]='240'>
                                                            <color-sketch [color]="'#FF0000'" (onChangeComplete)="changeColorEditComplete($event,j)">
                                                            </color-sketch>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <button (click)="deleteImageProductEdit($value.id,$value.product_id)" class="btn btn-danger-2 btn-sm">Eliminar</button>
                                            </td>
                                        </tr>
                                        <tr *ngIf="images.length<=0">
                                            <td COLSPAN=4>
                                                Aún no hay imagenes de producto
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <hr/>
                        </div>

                        <div class="col-lg-12 ">
                            <div class="form-group">
                                <label for="description" class="col-form-label">Descripción Pequeña: </label>
                                <textarea type="text" class="form-control" name="description"></textarea>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="description" class="col-form-label">Descripción Larga de contenido : </label>
                                <angular-editor [(ngModel)]="htmlContentEdit" [config]="config"></angular-editor>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group cursor-pointer" (click)="expandEdit()" style="justify-content: space-between;">
                                <h5 class="mb-0 pt-2 pb-2 pl-2" style="background: var(--theme_color_light);">Ver HTML Preview (Click para Expandir)</h5>
                            </div>
                            <div class="html" *ngIf="expand_edit==true" [innerHtml]="htmlContentEdit" id="collapseEdit">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label for="description" class="col-form-label">
                                    Enlace para compartir: 
                                    <span class="color-coral">
                                        <strong> (*)</strong>
                                    </span>
                                </label>
                                <div class="input-group mb-3">
                                    <input class="form-control " name="url" id="producto-url" type="text" placeholder="Ingrese su url para compartir producto">

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group text-align-end  text-right  mb-0">
                                <label class="" for="product_unavailable1">Producto No Agotado</label>
                                <label class="switch switch_ ml-2 mr-1">
                                    <input type="checkbox" id="product_unavailable1" name="unavailable"
                                        style="    transform: scale(1.2);" >
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group text-align-end  text-right  mb-0">
                                <label class="" for="product_visible2">Producto Visible</label>
                                <label class="switch switch_ ml-2 mr-1">
                                    <input type="checkbox" id="product_visible2" name="status"
                                        style="    transform: scale(1.2);" >
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-lg-12 ">
                            <button class="btn btn-first btn-block ladda-button basic-ladda-button mt-2" id="btn-addProduct" type="button" (click)="editProduct()" data-style="expand-left">
                                <span class="ladda-label">Editar producto</span>
                                <span class="ladda-spinner"></span>
                                <span class="ladda-spinner"></span>
                            </button>
                            <!-- <button type="button" id="btn-addProduct" class="btn btn-first mt-2 pb-2 pt-2 btn-block">Guardar producto</button> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Verify Modal content -->

<!--
     <div  *ngFor="let $value of $products let j= index" data-id="{{ $value.id }}" class="search-results list-horizontal">
                                <div class="list-item col-md-12 p-0">
                                    <div class="card shadow-sm border-product-card o-hidden flex-row mb-4 d-flex">
                                        <div class="list-thumb d-flex">
                                            <img class="border-product-img" alt="" width="80px" height="80px" src="{{$value.image_url}}"/>
                                        </div>
                                        <div class="flex-grow-1 pl-2 d-flex">
                                            <div class="card-body  align-self-center d-flex flex-column justify-content-between align-items-lg-center flex-lg-row">
                                                <div class="item-title">{{$value.name}}</div>
                                                <p class="m-0 text-muted-2 text-small w-15 w-sm-100">
                                                    <strong>Cat. </strong>{{$value.category_name}}<br>
                                                    <strong>Sub. </strong>{{$value.subcategory_name}}
                                                </p>
                                                <div class="m-0 text-muted-2 text-small w-15 w-sm-100">
                                                   
                                                    <div *ngFor="let $item of $value.product_type_sale let y= index">
                                                        <div *ngIf="$item.type=='unit'">
                                                            <div class="product-border-unit mr-2 text-left" style="display: grid;">
                                                                <div *ngIf="$item.discount!= null" class="d-flex">
                                                                    <div class="mb-0  mr-2">
                                                                        <span class="font-weight-bold ">{{ (($item.price - (($item.price * $item.discount )/100))) | moneda}}</span>
                                                                      
                                                                    </div>
                                                                    <div class="mb-0  mr-2">
                                                                        <del class="text-second">{{ $item.price | moneda}}</del>
                                                                    </div>
                                                                </div>
                                                                <div *ngIf="$item.discount==null">
                                                                    <span class="font-weight-bold">{{ (($item.price )) | moneda}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="$item.type=='weight'">
                                                            <div class="product-border-weight mr-2 text-left" style="display: grid;">
                                                                <div *ngIf="$item.discount!= null">
                                                                    <p class="mb-0"><span class="font-weight-bold  mr-2">{{ (($item.price )) | moneda}}</span>
                                                                </div>
                                                                <div *ngIf="$item.discount==null">
                                                                    <span class="font-weight-bold">{{ (($item.price )) | moneda}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="m-0 text-muted-2 text-small w-15 w-sm-100  d-lg-block item-badges">
                                                    <div *ngFor="let $item of $value.product_type_sale let y= index">
                                                        <div *ngIf="$item.type=='unit'">
                                                            <div class="product-border-unit mr-2 text-left" style="display: grid;">
                                                                <div *ngIf="$item.discount!= null" class="d-flex">
                                                                    <div class="mb-0">
                                                                        <span class="badge badge-danger">{{ (($item.discount ))}}%</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="$item.type=='weight'">
                                                            <div class="product-border-weight mr-2 text-left" style="display: grid;">
                                                                <div *ngIf="$item.discount!= null">
                                                                    <span class="badge badge-danger">{{ (($item.discount ))}}%</span>
                                                                </div>
                                                            </div>








                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                                <p class="m-0 text-muted-2 text-small w-15 w-sm-100  d-lg-block item-badges">
                                                    <span class="badge badge-success" ngif *ngIf="$value.status==1">Visible</span>
                                                    <span *ngIf="$value.status==0"  class="badge badge-warning">No Visible</span>
                                                </p>
                                                <p class="m-0 text-muted-2 text-small w-15 w-sm-100  d-lg-block item-badges">
                                                    <button class=" btn btn-link text-success mr-2 mb-2 font-16px" href="#"  type="button" data-toggle="modal"
                                                        data-target="#modalEdit" (click)="editModalProduct(this,$value.id)">
                                                        Editar
                                                    </button>
                                                    <button class=" btn btn-link text-danger-2 mr-2 mb-2 font-16px  category_delete alert-confirm font-16px"
                                                        (click)="deleteModalProduct(this,$value.id)" name="category_delete"
                                                        href="#" data-toggle="tooltip" data-placement="top"
                                                        title="Eliminar !!!">
                                                        Eliminar
                                                    </button>
                                                </p>
                                            </div>
                        
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="$products.length<=0">
                                Aún no hay sub categorías
                            </div>
-->